@model Sunflower.ViewModels.InvoiceDetailVM

@{
    ViewData["Title"] = "Invoice Details #" + Model.HoaDon.MaHd;
    double total = 0;
}

<h4 class="mb-4 text-primary">Invoice Details #@Model.HoaDon.MaHd</h4>

<div class="row">
    <div class="col-md-6">
        <div class="bg-light rounded p-4 h-100">
            <h6 class="mb-3">Customer Information</h6>
            <dl class="row mb-0">
                <dt class="col-sm-4">Customer ID:</dt>
                <dd class="col-sm-8">@Model.HoaDon.MaKh</dd>

                <dt class="col-sm-4">Recipient Name:</dt>
                <dd class="col-sm-8">@(Model.HoaDon.HoTen ?? Model.HoaDon.MaKhNavigation.HoTen)</dd>

                <dt class="col-sm-4">Phone:</dt>
                <dd class="col-sm-8">@Model.HoaDon.MaKhNavigation.DienThoai</dd>

                <dt class="col-sm-4">Delivery Address:</dt>
                <dd class="col-sm-8">@Model.HoaDon.DiaChi</dd>
            </dl>
        </div>
    </div>

    <div class="col-md-6">
        <div class="bg-light rounded p-4 h-100">
            <h6 class="mb-3">Order Information</h6>
            <dl class="row mb-0">
                <dt class="col-sm-4">Status:</dt>
                <dd class="col-sm-8"><strong class="text-success">@Model.HoaDon.MaTrangThaiNavigation.TenTrangThai</strong></dd>

                <dt class="col-sm-4">Order Date:</dt>
                <dd class="col-sm-8">@Model.HoaDon.NgayDat.ToString("g")</dd>

                <dt class="col-sm-4">Delivery Date:</dt>
                <dd class="col-sm-8">@Model.HoaDon.NgayGiao?.ToString("g")</dd>

                <dt class="col-sm-4">Shipping Method:</dt>
                <dd class="col-sm-8">@Model.HoaDon.CachVanChuyen</dd>

                <dt class="col-sm-4">Payment Method:</dt>
                <dd class="col-sm-8">@Model.HoaDon.CachThanhToan</dd>
            </dl>
        </div>
    </div>
</div>

<div class="bg-light rounded h-100 p-4 mt-4">
    <h6 class="mb-4">Product List</h6>
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Unit Price</th>
                    <th>Discount</th>
                    <th class="text-end">Subtotal</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.ChiTietHds)
                {
                    var subtotal = (item.DonGia * item.SoLuong) * (1 - item.GiamGia);
                    total += subtotal;
                    <tr>
                        <td>@item.TenHh</td>
                        <td>@item.SoLuong</td>
                        <td>@item.DonGia.ToString("N0")</td>
                        <td>@((item.GiamGia * 100).ToString("F2"))%</td>
                        <td class="text-end">@subtotal.ToString("N0")</td>
                    </tr>
                }
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="4" class="text-end">Shipping Fee:</td>
                    <td class="text-end">@Model.HoaDon.PhiVanChuyen.ToString("N0")</td>
                </tr>
                <tr>
                    <td colspan="4" class="text-end h5">Total Amount:</td>
                    <td class="text-end h5 text-danger">
                        @((total + Model.HoaDon.PhiVanChuyen).ToString("N0"))
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>

<a asp-action="Index" class="btn btn-secondary mt-3">Back to List</a>
